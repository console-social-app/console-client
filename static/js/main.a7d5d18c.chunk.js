(this["webpackJsonpconsole-client"]=this["webpackJsonpconsole-client"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),r=n(30),o=n.n(r),c=(n(76),n(27)),i=n(8),u=n(9),l=n(11),d=n(10),h=n(15),m=n(119),j=n(2),p=n(3),b=n(0),g=["user","component","render"],O=function(e){var t=e.user,n=e.component,s=e.render,a=Object(p.a)(e,g);return t&&s?Object(b.jsx)(h.b,Object(j.a)(Object(j.a)({},a),{},{render:s})):Object(b.jsx)(h.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return t?Object(b.jsx)(n,Object(j.a)({},e)):Object(b.jsx)(h.a,{to:"/"})}}))},f=n(54),v=(n(85),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleClose=function(){return s.setState({show:!1})},s.state={show:!0},s.timeoutId=null,s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.timeoutId=setTimeout(this.handleClose,5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this.props,t=e.variant,n=e.heading,s=e.message,a=e.deleteAlert,r=e.id;return this.state.show||setTimeout((function(){a(r)}),300),Object(b.jsx)(f.a,{dismissible:!0,show:this.state.show,variant:t,onClose:this.handleClose,children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(f.a.Heading,{children:n}),Object(b.jsx)("p",{className:"alert-body",children:s})]})})}}]),n}(a.a.Component)),x=n(71),C=n(39),w=n(12),y=n(31),S=n.n(y),k=n(38),A="https://console-social-app.herokuapp.com",P="http://localhost:4741",N="localhost"===window.location.hostname?P:A,I=n(16),E=n.n(I),_={},U=function(){var e;return function(){var t=Object(k.a)(S.a.mark((function t(n){var s,a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.cancel(),e=E.a.CancelToken.source(),t.prev=2,!_[n]){t.next=5;break}return t.abrupt("return",_[n]);case 5:return t.next=7,E()(n,{cancelToken:e.token});case 7:return s=t.sent,a=s.data.results,_[n]=a,t.abrupt("return",a);case 13:t.prev=13,t.t0=t.catch(2),E.a.isCancel(t.t0)?console.log("Request canceled",t.t0.message):console.log("Something went wrong: ",t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}()}(),D=(n(104),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={users:null,loading:!1,value:""},e.search=function(){var t=Object(k.a)(S.a.mark((function t(n){var s,a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,U("".concat(N,"/users?users=").concat(n));case 3:s=t.sent,a=s,e.setState({users:a,loading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeHandler=function(){var t=Object(k.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.search(n.target.value),e.setState({value:n.target.value});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"renderUsers",get:function(){var e="";return this.state.users&&(e=this.state.users.map((function(e){return Object(b.jsx)("div",{className:"result",children:Object(b.jsx)(w.b,{className:"resultLink",to:"/posts?user=".concat(e._id),children:e.username})},e._id)}))),this.state.value||(e=""),e}},{key:"render",value:function(){var e=this,t=this.state.value,n=0===this.renderUsers.length&&t.length>0,s=Object(b.jsx)("div",{className:"result",children:"No results"});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"searchBar",children:Object(b.jsx)("input",{className:"searchInput",value:t,onChange:function(t){return e.onChangeHandler(t)},placeholder:"Search Users"})}),Object(b.jsx)("div",{className:"resultContainer",children:n?s:this.renderUsers})]})}}]),n}(s.Component)),T=(n(105),Object(b.jsxs)(s.Fragment,{children:[Object(b.jsx)(w.c,{exact:!0,to:"/home",className:"nav-link",children:"Home"}),Object(b.jsx)(w.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(b.jsx)(w.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]})),B=Object(b.jsxs)(s.Fragment,{children:[Object(b.jsx)(w.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(b.jsx)(w.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),F=function(e){var t=e.user;return Object(b.jsxs)(C.a,{id:"header",expand:"md",children:[Object(b.jsx)(C.a.Brand,{children:Object(b.jsx)(w.b,{to:"/home",id:"headerTitle",children:"{ console }"})}),Object(b.jsx)(C.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsx)(C.a.Collapse,{id:"basic-navbar-nav",children:Object(b.jsx)(x.a,{className:"ml-auto",children:t?T:B})}),Object(b.jsx)(D,{})]})},z=n(7),G=function(e){return E()({url:N+"/sign-in/",method:"POST",data:{credentials:{email:e.email,password:e.password}}})},L="Couldn't find posts, please refresh the page and try again. Error: ",q=n(5),H=n(14),M=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(z.a)({},e.target.name,e.target.value))},s.onSignUp=function(e){e.preventDefault();var t,n=s.props,a=n.msgAlert,r=n.history,o=n.setUser;(t=s.state,E()({method:"POST",url:N+"/sign-up/",data:{credentials:{username:t.username,email:t.email,password:t.password,password_confirmation:t.passwordConfirmation}}})).then((function(){return G(s.state)})).then((function(e){return o(e.data.user)})).then((function(){return a({heading:"Sign Up Success",message:"Successfully registered! You've been signed in as well.",variant:"success"})})).then((function(){return r.push("/")})).catch((function(e){s.setState({email:"",password:"",passwordConfirmation:""}),a({heading:"Sign Up Failed with error: "+e.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"})}))},s.state={username:"",email:"",password:"",passwordConfirmation:""},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,s=e.password,a=e.passwordConfirmation;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Sign Up"}),Object(b.jsxs)(q.a,{onSubmit:this.onSignUp,children:[Object(b.jsxs)(q.a.Group,{controlId:"email",children:[Object(b.jsx)(q.a.Label,{children:"Username"}),Object(b.jsx)(q.a.Control,{required:!0,type:"username",name:"username",value:t,placeholder:"Enter Username",onChange:this.handleChange})]}),Object(b.jsxs)(q.a.Group,{controlId:"email",children:[Object(b.jsx)(q.a.Label,{children:"Email address"}),Object(b.jsx)(q.a.Control,{required:!0,type:"email",name:"email",value:n,placeholder:"Enter Email",onChange:this.handleChange})]}),Object(b.jsxs)(q.a.Group,{controlId:"password",children:[Object(b.jsx)(q.a.Label,{children:"Password"}),Object(b.jsx)(q.a.Control,{required:!0,name:"password",value:s,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(b.jsxs)(q.a.Group,{controlId:"passwordConfirmation",children:[Object(b.jsx)(q.a.Label,{children:"Password Confirmation"}),Object(b.jsx)(q.a.Control,{required:!0,name:"passwordConfirmation",value:a,type:"password",placeholder:"Confirm Password",onChange:this.handleChange})]}),Object(b.jsx)(H.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(s.Component),J=Object(h.f)(M),Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(z.a)({},e.target.name,e.target.value))},s.toggleChecked=function(){s.setState((function(e){return{checked:!e.checked}}))},s.onSignIn=function(e){e.preventDefault();var t=s.props,n=t.msgAlert,a=t.history,r=t.setUser,o=s.state.checked;G(s.state).then((function(e){return r(e.data.user),e.data.user})).then((function(e){var t=JSON.stringify(e);window&&o&&window.localStorage.setItem("user",t)})).then((function(){return n({heading:"Sign In Success",message:"Welcome!",variant:"success"})})).then((function(){return a.push("/home")})).catch((function(e){s.setState({email:"",password:""}),n({heading:"Sign In Failed with error: "+e.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"})}))},s.state={email:"",password:"",checked:!1},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,s=e.checked;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Sign In"}),Object(b.jsxs)(q.a,{onSubmit:this.onSignIn,children:[Object(b.jsxs)(q.a.Group,{controlId:"email",children:[Object(b.jsx)(q.a.Label,{children:"Email address"}),Object(b.jsx)(q.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})]}),Object(b.jsxs)(q.a.Group,{controlId:"password",children:[Object(b.jsx)(q.a.Label,{children:"Password"}),Object(b.jsx)(q.a.Control,{required:!0,name:"password",value:n,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(b.jsx)(H.a,{variant:"primary",type:"submit",children:"Submit"}),Object(b.jsx)(q.a.Check,{type:"checkbox",id:"default-checkbox",label:"Keep me logged in",checked:s,onChange:this.toggleChecked})]})]})})}}]),n}(s.Component),R=Object(h.f)(Y),V=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.msgAlert,n=e.history,s=e.clearUser;(function(e){return E()({url:N+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})})(e.user).finally((function(){return t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"})})).finally((function(){window&&window.localStorage.removeItem("user")})).finally((function(){return n.push("/sign-in")})).finally((function(){return s()}))}},{key:"render",value:function(){return""}}]),n}(s.Component),W=Object(h.f)(V),K=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(z.a)({},e.target.name,e.target.value))},s.onChangePassword=function(e){e.preventDefault();var t=s.props,n=t.msgAlert,a=t.history,r=t.user;(function(e,t){return E()({url:N+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(t.token)},data:{passwords:{old:e.oldPassword,new:e.newPassword}}})})(s.state,r).then((function(){return n({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"})})).then((function(){return a.push("/")})).catch((function(e){s.setState({oldPassword:"",newPassword:""}),n({heading:"Change Password Failed with error: "+e.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"})}))},s.state={oldPassword:"",newPassword:""},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.oldPassword,n=e.newPassword;return Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(b.jsx)("h3",{children:"Change Password"}),Object(b.jsxs)(q.a,{onSubmit:this.onChangePassword,children:[Object(b.jsxs)(q.a.Group,{controlId:"oldPassword",children:[Object(b.jsx)(q.a.Label,{children:"Old password"}),Object(b.jsx)(q.a.Control,{required:!0,name:"oldPassword",value:t,type:"password",placeholder:"Old Password",onChange:this.handleChange})]}),Object(b.jsxs)(q.a.Group,{controlId:"newPassword",children:[Object(b.jsx)(q.a.Label,{children:"New Password"}),Object(b.jsx)(q.a.Control,{required:!0,name:"newPassword",value:n,type:"password",placeholder:"New Password",onChange:this.handleChange})]}),Object(b.jsx)(H.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(s.Component),Q=Object(h.f)(K),X=function(e,t){return E()({method:"GET",url:"".concat(N,"/posts/").concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})},Z=n(43),$=n.n(Z),ee=n(36),te=(n(65),n(66),n(108),n(109),n(110),n(111),n(112),n(67),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(z.a)({},e.target.name,e.target.value))},s.onCreatePost=function(e){e.preventDefault();var t=s.props,n=t.msgAlert,a=t.history,r=t.user,o=t.updatePosts;(function(e,t){return E()({method:"POST",url:N+"/posts/",headers:{Authorization:"Bearer ".concat(t.token)},data:{post:{owner:e.owner,title:e.title,content:e.content}}})})(s.state,r).then((function(e){return s.setState({postId:e.data.post._id}),e})).then((function(e){return o({owner:r,title:s.state.title,content:s.state.content,comments:[],_id:e.data.post._id})})).then((function(){return a.push("/home")})).then((function(){return s.setState({content:""})})).then((function(){return s.setState({title:""})})).then((function(){n({heading:"Post Created",message:"Your post has successfully been created.",variant:"success"})})).catch((function(e){n({heading:"Couldn't Create Post",message:"Failed to create post, please double check your input and try again. Error: "+e.message,variant:"danger"})}))},s.state={title:"",content:"",postId:null},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state.title;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h5",{id:"createPostHeader",children:"Create Post"}),Object(b.jsx)("div",{className:"postContainer",children:Object(b.jsxs)(q.a,{onSubmit:this.onCreatePost,children:[Object(b.jsx)(q.a.Group,{controlId:"title",children:Object(b.jsx)(q.a.Control,{required:!0,autoComplete:"off",className:"titleInput",name:"title",value:t,placeholder:"Post Title",onChange:this.handleChange})}),Object(b.jsx)(q.a.Group,{controlId:"content",children:Object(b.jsx)($.a,{className:"border codeEditor",placeholder:"// your code here",value:this.state.content,onValueChange:function(t){return e.setState({content:t})},highlight:function(e){return Object(ee.highlight)(e,ee.languages.js)},padding:10})}),Object(b.jsx)(H.a,{id:"createPostButton",variant:"primary",type:"submit",children:"Create"})]})})]})}}]),n}(s.Component)),ne=Object(h.f)(te),se=(n(113),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleChange=function(e){var t=Object(z.a)({},e.target.name,e.target.value);s.setState((function(e){return{post:Object(j.a)(Object(j.a)({},e.post),t)}}))},s.handleSubmit=function(e){e.preventDefault();var t=s.props,n=t.user,a=t.msgAlert,r=t.history,o=t.match;(function(e,t,n){return E()({method:"PATCH",url:"".concat(N,"/posts/").concat(n),headers:{Authorization:"Bearer ".concat(t.token)},data:{post:{title:e.title,content:e.content}}})})(s.state,n,o.params.id).then((function(e){return r.push("/posts/"+o.params.id)})).then((function(){return a({heading:"Post Updated!",message:"Nice work, go check out your post.",variant:"success"})})).catch((function(e){a({heading:"Post update failed :(",message:"Something went wrong: "+e.message,variant:"danger"})}))},s.state={title:"",content:""},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.match,s=t.user,a=t.msgAlert;X(s,n.params.id).then((function(t){return e.setState({title:t.data.post.title,content:t.data.post.content})})).then((function(){return a({heading:"Show post success",message:"Check out the post",variant:"success"})})).catch((function(e){return a({heading:"Show post failed :(",message:"Something went wrong: "+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.title,s=t.content,a=this.props.match;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h5",{id:"updatePostHeader",children:"Edit Post"}),Object(b.jsx)("div",{className:"postContainer",children:Object(b.jsxs)(q.a,{onSubmit:this.handleSubmit,children:[Object(b.jsx)(q.a.Group,{controlId:"title",children:Object(b.jsx)(q.a.Control,{required:!0,className:"titleInput",name:"title",value:n,placeholder:"Post Title",onChange:this.handleChange})}),Object(b.jsx)(q.a.Group,{controlId:"content",children:Object(b.jsx)($.a,{className:"border codeEditor",value:s,onValueChange:function(t){return e.setState({content:t})},highlight:function(e){return Object(ee.highlight)(e,ee.languages.js)},padding:10})}),Object(b.jsx)(H.a,{id:"updatePostButton",variant:"primary",type:"submit",children:"Update"})]})}),Object(b.jsx)(w.b,{to:"/posts/".concat(a.params.id),children:Object(b.jsx)(H.a,{size:"sm",className:"btn",children:"Go back"})})]})}}]),n}(s.Component)),ae=Object(h.f)(se),re=n(53),oe=n.n(re),ce=(n(114),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(z.a)({},e.target.name,e.target.value))},s.onCreateComment=function(e){e.preventDefault();var t=s.props,n=t.msgAlert,a=t.user,r=t.postId,o=t.updateComments,c=t.showComments,i=t.toggleComments,u=s.state,l=u.content,d=u._id;(function(e,t,n){return E()({method:"POST",url:N+"/posts/".concat(n,"/comments/"),headers:{Authorization:"Bearer ".concat(t.token)},data:{comment:{ownerName:e.ownerName,owner:e.owner,content:e.content,_id:e._id}}})})(s.state,a,r).then((function(){return o({ownerName:a.username,owner:a._id,content:l,_id:d})})).then((function(){c||i()})).then((function(){s.setState({content:""})})).catch((function(e){n({heading:"Couldn't Create Comment",message:"Failed to create comment, please double check your input and try again. Error: "+e.message,variant:"danger"})})).finally((function(){s.setState({_id:oe()()})}))},s.state={ownerName:e.user.username,content:"",created:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({_id:oe()()})}},{key:"render",value:function(){var e=this.state.content;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(q.a,{onSubmit:this.onCreateComment,children:Object(b.jsx)(q.a.Group,{children:Object(b.jsx)(q.a.Control,{required:!0,autoComplete:"off",className:"commentInput",name:"content",value:e,placeholder:"Add Comment",onChange:this.handleChange})})})})}}]),n}(s.Component)),ie=Object(h.f)(ce),ue=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleChange=function(e){s.setState(Object(z.a)({},e.target.name,e.target.value))},s.onEditComment=function(e){e.preventDefault();var t=s.props,n=t.comment,a=t.user,r=t.postId,o=t.updateComments,c=t.toggle,i=s.state.content,u=Object(j.a)({},n);u.content=i,function(e,t,n){E()({method:"PATCH",url:N+"/posts/".concat(n,"/comments/"),headers:{Authorization:"Bearer ".concat(t.token)},data:{comment:{ownerName:e.ownerName,owner:e.owner,content:e.content,_id:e._id}}})}(u,a,r),o(u),c("showEdit")},s.state={deleted:!1,content:""},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.comment;this.setState({content:e.content})}},{key:"render",value:function(){var e=this.state,t=e.deleted,n=e.content;return t?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(q.a,{onSubmit:this.onEditComment,children:[Object(b.jsx)(q.a.Group,{controlId:"content",children:Object(b.jsx)(q.a.Control,{required:!0,name:"content",value:n,placeholder:"Comment",onChange:this.handleChange})}),Object(b.jsx)(H.a,{variant:"primary",type:"submit",children:"Update"})]})})}}]),n}(s.Component),le=Object(h.f)(ue),de=(n(115),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).toggle=function(e){s.setState((function(t){return Object(z.a)({},e,!t[e])}))},s.onDestroyComment=function(e){e.preventDefault();var t=s.props,n=t.comment,a=t.user,r=t.postId,o=t.updateComments;!function(e,t,n){E()({method:"DELETE",url:N+"/posts/".concat(t,"/comments/"),headers:{Authorization:"Bearer ".concat(e.token)},data:{commentId:n,userId:e._id}})}(a,r,n._id),o(n._id)},s.state={comment:null,showEdit:!1,showButtons:!1,deleted:!1},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.deleted,s=t.showEdit,a=t.showButtons,r=this.props,o=r.comment,c=r.user,i=r.msgAlert,u=r.postId,l=r.updateComments,d=o.owner===c._id&&a&&!s,m=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(H.a,{size:"sm",variant:"secondary",className:"commentButton",onClick:function(){return e.toggle("showEdit")},children:"Edit"}),Object(b.jsx)(H.a,{size:"sm",variant:"danger",className:"commentButton",onClick:this.onDestroyComment,children:"Delete"})]}),j=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(le,{toggle:this.toggle,updateComments:l,msgAlert:i,comment:o,postId:u,user:c}),Object(b.jsx)(H.a,{size:"sm",variant:"danger",onClick:function(){return e.toggle("showEdit")},children:"Cancel"})]});return n?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{onClick:function(){return e.toggle("showButtons")},children:Object(b.jsxs)("div",{className:"comment",children:[Object(b.jsx)(w.b,{to:"/posts?user=".concat(o.owner),className:"commentOwner",children:o.ownerName}),s?j:o.content,d?m:""]})})})}}]),n}(s.Component)),he=Object(h.f)(de),me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).state={comments:[],loading:!1},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.comments,n=e.msgAlert,s=e.user,a=e.postId,r=e.postOwner,o=e.updateComments;return Object(b.jsx)("div",{children:t.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(he,{updateComments:o,postOwner:r,msgAlert:n,comment:e,postId:a,user:s})},e._id)}))})}}]),n}(s.Component),je=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).goToPost=function(e){if(e.target.classList.contains("post")){var t=s.props,n=t.post;t.history.push("/posts/".concat(n._id))}},s.updateComments=function(e){var t=s.state.comments,n=Object(c.a)(t);if("string"===typeof e){var a=t.findIndex((function(t){return t._id===e}));n.splice(a,1),s.setState({comments:n})}else{var r=t.findIndex((function(t){return t._id===e._id}));r>=0?(n.splice(r,1,e),s.setState({comments:n})):s.setState((function(t){return{comments:[].concat(Object(c.a)(t.comments),[e])}}))}},s.toggleComments=function(){s.setState((function(e){return{showComments:!e.showComments}}))},s.state={comments:[],showComments:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.post;this.setState({comments:e.comments})}},{key:"render",value:function(){var e=this,t=this.props,n=t.msgAlert,s=t.user,a=t.post,r=this.state,o=r.showComments,c=r.comments,i=1===c.length?"":"s",u=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(me,{updateComments:this.updateComments,msgAlert:n,user:s,comments:c,postId:a._id}),Object(b.jsx)(ie,{updateComments:this.updateComments,toggleComments:this.toggleComments,showComments:o,msgAlert:n,user:s,postId:a._id,postOwner:a.owner._id})]});return Object(b.jsxs)("div",{className:"post postContainer",onClick:function(t){return e.goToPost(t)},children:[Object(b.jsxs)("p",{className:"post postTitle",children:[Object(b.jsx)(w.b,{to:"/posts?user=".concat(a.owner._id),className:"postOwner",children:a.owner.username}),a.title]}),Object(b.jsx)("div",{className:"post postContent",children:a.content.split("\n").map((function(e,t){return Object(b.jsx)("p",{className:"code",children:e.replace(" ","\xa0")},t)}))}),Object(b.jsx)(H.a,{className:"showComments",size:"sm",variant:"outline-primary",onClick:this.toggleComments,children:o?"Hide Comments":"".concat(c.length," Comment").concat(i)}),o?u:""]})}}]),n}(s.Component),pe=Object(h.f)(je),be=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).updatePosts=function(e){s.setState((function(t){return{posts:[e].concat(Object(c.a)(t.posts))}}))},s.state={posts:[],loading:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.user,s=t.msgAlert;(function(e){return E()({method:"GET",url:N+"/posts/",headers:{Authorization:"Bearer ".concat(e.token)}})})(n).then((function(t){return e.setState({posts:t.data.posts.reverse()})})).catch((function(e){s({heading:"Couldn't Create Post",message:L+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this.state.posts,t=this.props,n=t.user,s=t.msgAlert;return Object(b.jsxs)("div",{children:[Object(b.jsx)(ne,{updatePosts:this.updatePosts,msgAlert:s,user:n}),e.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(pe,{msgAlert:s,user:n,post:e,comments:e.comments})},e._id)}))]})}}]),n}(s.Component),ge=n(70),Oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).destroy=function(){var e=s.props,t=e.user,n=e.match,a=e.msgAlert;(function(e,t){return E()({method:"DELETE",url:"".concat(N,"/posts/").concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})})(t,n.params.id).then((function(){a({heading:"Post Deleted",message:"Your post has successfully been deleted.",variant:"success"})})).then((function(){return s.setState({deleted:!0})})).catch((function(e){a({heading:"Couldn't Delete Post",message:"Something went wrong while deleting this post, please refresh and try again. Error: "+e.message,variant:"danger"})}))},s.state={post:null,deleted:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.user,s=t.match,a=t.msgAlert;X(n,s.params.id).then((function(t){return e.setState({post:t.data.post})})).catch((function(e){a({heading:"Couldn't Create Post",message:"Couldn't find this post. Please refresh the page and try again. Error: "+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this.state,t=e.post,n=e.deleted,s=this.props,a=s.user,r=s.msgAlert,o=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(w.b,{to:"/posts/".concat(this.props.match.params.id,"/edit"),children:Object(b.jsx)(H.a,{size:"sm",variant:"primary",children:"Edit"})}),Object(b.jsx)(H.a,{size:"sm",variant:"danger",onClick:this.destroy,children:"Delete post"})]});return t?n?Object(b.jsx)(h.a,{to:{pathname:"/home"}}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(pe,{msgAlert:r,user:a,post:t,comments:t.comments}),Object(b.jsx)(w.b,{to:"/home",children:Object(b.jsx)(H.a,{size:"sm",className:"btn",children:"Go back"})}),t.owner._id===a._id?o:""]}):Object(b.jsx)(ge.a,{animation:"border",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}}]),n}(s.Component),fe=Object(h.f)(Oe),ve=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).updatePosts=function(e){s.setState((function(t){return{posts:[e].concat(Object(c.a)(t.posts))}}))},s.state={posts:[],loading:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.user,s=t.location,a=t.msgAlert;(function(e,t){return E()({method:"GET",url:"".concat(N,"/posts").concat(t),headers:{Authorization:"Bearer ".concat(e.token)}})})(n,s.search).then((function(t){return e.setState({posts:t.data.posts.reverse()})})).catch((function(e){a({heading:"Couldn't Create Post",message:L+e.message,variant:"danger"})}))}},{key:"render",value:function(){var e=this.state.posts,t=this.props,n=t.user,s=t.msgAlert;return Object(b.jsxs)("div",{children:[Object(b.jsx)(ne,{updatePosts:this.updatePosts,msgAlert:s,user:n}),e.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsx)(pe,{msgAlert:s,user:n,post:e,comments:e.comments})},e._id)}))]})}}]),n}(s.Component),xe=Object(h.f)(ve),Ce=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).setUser=function(e){return s.setState({user:e})},s.clearUser=function(){return s.setState({user:null})},s.deleteAlert=function(e){s.setState((function(t){return{msgAlerts:t.msgAlerts.filter((function(t){return t.id!==e}))}}))},s.msgAlert=function(e){var t=e.heading,n=e.message,a=e.variant,r=Object(m.a)();s.setState((function(e){return{msgAlerts:[].concat(Object(c.a)(e.msgAlerts),[{heading:t,message:n,variant:a,id:r}])}}))},s.state={user:null,msgAlerts:[]},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.history,t=JSON.parse(window.localStorage.getItem("user"));window&&(this.setUser(t),e.push("/home"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.msgAlerts,s=t.user;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(F,{user:s}),n.map((function(t){return Object(b.jsx)(v,{heading:t.heading,variant:t.variant,message:t.message,id:t.id,deleteAlert:e.deleteAlert},t.id)})),Object(b.jsxs)("main",{className:"container col-sm-12 col-lg-6",children:[Object(b.jsx)(h.b,{path:"/sign-up",render:function(){return Object(b.jsx)(J,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(b.jsx)(h.b,{path:"/sign-in",render:function(){return Object(b.jsx)(R,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(b.jsx)(O,{user:s,path:"/sign-out",render:function(){return Object(b.jsx)(W,{msgAlert:e.msgAlert,clearUser:e.clearUser,user:s})}}),Object(b.jsx)(O,{user:s,path:"/change-password",render:function(){return Object(b.jsx)(Q,{msgAlert:e.msgAlert,user:s})}}),Object(b.jsx)(O,{user:s,path:"/create-post",render:function(){return Object(b.jsx)(ne,{msgAlert:e.msgAlert,user:s})}}),Object(b.jsx)(O,{user:s,exact:!0,path:"/posts/:id/edit",render:function(){return Object(b.jsx)(ae,{msgAlert:e.msgAlert,user:s})}}),Object(b.jsx)(O,{user:s,exact:!0,path:"/home",render:function(){return Object(b.jsx)(be,{msgAlert:e.msgAlert,user:s})}}),Object(b.jsx)(O,{user:s,exact:!0,path:"/posts/:id",render:function(){return Object(b.jsx)(fe,{msgAlert:e.msgAlert,user:s})}}),Object(b.jsx)(O,{user:s,exact:!0,path:"/posts",render:function(){return Object(b.jsx)(xe,{msgAlert:e.msgAlert,user:s})}})]})]})}}]),n}(s.Component),we=Object(h.f)(Ce),ye=Object(b.jsx)(w.a,{basename:"/console-client",children:Object(b.jsx)(we,{})});o.a.render(ye,document.getElementById("root"))},67:function(e,t,n){},76:function(e,t,n){},85:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.a7d5d18c.chunk.js.map